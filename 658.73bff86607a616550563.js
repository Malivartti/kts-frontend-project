"use strict";(self.webpackChunkkts_frontend_project=self.webpackChunkkts_frontend_project||[]).push([[658],{8658:(r,e,t)=>{t.r(e),t.d(e,{default:()=>w});var a=t(4848),s=t(5303),o=t(5974),i=t(7813),n=t(2385);const p=function(){function r(){this._avatar="",this._avatarError="",this._name="",this._nameError="",this._email="",this._emailError="",this._password="",this._passwordError="",this._passwordRepeat="",this._passwordRepeatError="",(0,i.Gn)(this,{_avatar:i.sH,_avatarError:i.sH,_name:i.sH,_nameError:i.sH,_email:i.sH,_emailError:i.sH,_password:i.sH,_passwordError:i.sH,_passwordRepeat:i.sH,_passwordRepeatError:i.sH,avatar:i.EW,avatarError:i.EW,name:i.EW,nameError:i.EW,email:i.EW,emailError:i.EW,password:i.EW,passwordError:i.EW,passwordRepeat:i.EW,passwordRepeatError:i.EW,setAvatar:i.XI.bound,setName:i.XI.bound,setEmail:i.XI.bound,setPassword:i.XI.bound,setPasswordRepeat:i.XI.bound,validateAvatar:i.XI,validateName:i.XI,validateEmail:i.XI,validatePassword:i.XI,validatePasswordRepeat:i.XI,isValid:i.XI,register:i.XI})}return Object.defineProperty(r.prototype,"avatar",{get:function(){return this._avatar},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"avatarError",{get:function(){return this._avatarError},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"nameError",{get:function(){return this._nameError},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"email",{get:function(){return this._email},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"emailError",{get:function(){return this._emailError},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"password",{get:function(){return this._password},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"passwordError",{get:function(){return this._passwordError},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"passwordRepeat",{get:function(){return this._passwordRepeat},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"passwordRepeatError",{get:function(){return this._passwordRepeatError},enumerable:!1,configurable:!0}),r.prototype.setAvatar=function(r){this._avatarError&&(this._avatarError=""),this._avatar=r},r.prototype.setName=function(r){this._nameError&&(this._nameError=""),this._name=r},r.prototype.setEmail=function(r){this._emailError&&(this._emailError=""),this._email=r},r.prototype.setPassword=function(r){this._passwordError&&(this._passwordError=""),this._password=r},r.prototype.setPasswordRepeat=function(r){this._passwordRepeatError&&(this._passwordRepeatError=""),this._passwordRepeat=r},r.prototype.validateAvatar=function(){if(this._avatar.trim()){if((0,o.jL)(this._avatar))return!0;this._avatarError="Неверный формат"}else this._avatarError="Введите ссылку на изображение"},r.prototype.validateName=function(){if(this._name.trim())return!0;this._nameError="Введите имя"},r.prototype.validateEmail=function(){if(this._email.trim()){if((0,o.mi)(this._email))return!0;this._emailError="Неверный формат"}else this._emailError="Введите почту"},r.prototype.validatePassword=function(){if(this._password.trim())if((0,o.Vg)(this._password.trim())){if(!(this._password.trim().length<4))return!0;this._passwordError="Пароль должен иметь минимум 4 символа"}else this._passwordError="Пароль должен состоять только из латинских букв и цифр";else this._passwordError="Введите пароль"},r.prototype.validatePasswordRepeat=function(){if(this._passwordRepeat.trim()){if(this._passwordRepeat===this._password)return!0;this._passwordRepeatError="Пароли не совпадают"}else this._passwordRepeatError="Введите пароль повторно"},r.prototype.isValid=function(){var r=this.validateAvatar(),e=this.validateName(),t=this.validateEmail(),a=this.validatePassword(),s=this.validatePasswordRepeat();return r&&e&&t&&a&&s},r.prototype.register=function(){return r=this,e=void 0,a=function(){return function(r,e){var t,a,s,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=n(0),i.throw=n(1),i.return=n(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function n(n){return function(p){return function(n){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,n[0]&&(o=0)),o;)try{if(t=1,a&&(s=2&n[0]?a.return:n[0]?a.throw||((s=a.return)&&s.call(a),0):a.next)&&!(s=s.call(a,n[1])).done)return s;switch(a=0,s&&(n=[2&n[0],s.value]),n[0]){case 0:case 1:s=n;break;case 4:return o.label++,{value:n[1],done:!1};case 5:o.label++,a=n[1],n=[0];continue;case 7:n=o.ops.pop(),o.trys.pop();continue;default:if(!((s=(s=o.trys).length>0&&s[s.length-1])||6!==n[0]&&2!==n[0])){o=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){o.label=n[1];break}if(6===n[0]&&o.label<s[1]){o.label=s[1],s=n;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(n);break}s[2]&&o.ops.pop(),o.trys.pop();continue}n=e.call(r,o)}catch(r){n=[6,r],a=0}finally{t=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,p])}}}(this,(function(r){switch(r.label){case 0:return this.isValid()?[4,n.A.user.registerUser(this._avatar,this._name,this._email,this._password)]:[2];case 1:return r.sent(),[2]}}))},new((t=void 0)||(t=Promise))((function(s,o){function i(r){try{p(a.next(r))}catch(r){o(r)}}function n(r){try{p(a.throw(r))}catch(r){o(r)}}function p(r){var e;r.done?s(r.value):(e=r.value,e instanceof t?e:new t((function(r){r(e)}))).then(i,n)}p((a=a.apply(r,e||[])).next())}));var r,e,t,a},r}();var l=t(3390),u=t(1058),c=t(2418),d=t(3443),h=t(6540),f=t(2389),m=t(7767);const _="DdG9LJiy",w=(0,d.PA)((function(){var r=(0,d.iz)((function(){return new p})),e=(0,f.Bd)("register").t,t=(0,m.Zp)(),o=(0,h.useCallback)((function(){t(s.Vx.root)}),[t]),i=(0,h.useCallback)((function(e){e.preventDefault(),r.register()}),[r]),w=(0,h.useCallback)((function(){t(s.Vx.login.create())}),[t]);return(0,n.C)({t:e,store:n.A.user,onSuccess:o}),(0,a.jsx)("div",{className:"tVnS4GAO",children:(0,a.jsxs)("form",{className:"nlDXL9dT",onSubmit:i,noValidate:!0,children:[(0,a.jsx)(c.A,{className:"FtU5nKxw",tag:"h1",view:"title",children:e("Регистрация")}),(0,a.jsx)("div",{className:"pyJeyUcm",style:{backgroundImage:"url(".concat(r.avatar,")")}}),(0,a.jsx)(u.A,{className:_,type:"text",value:r.avatar,onChange:r.setAvatar,error:r.avatarError?e(r.avatarError):"",placeholder:e("Ссылка на изображение")}),(0,a.jsx)(u.A,{className:_,type:"text",value:r.name,onChange:r.setName,error:r.nameError?e(r.nameError):"",placeholder:e("Имя")}),(0,a.jsx)(u.A,{className:_,type:"email",value:r.email,onChange:r.setEmail,error:r.emailError?e(r.emailError):"",placeholder:e("Почта")}),(0,a.jsx)(u.A,{className:_,type:"password",value:r.password,onChange:r.setPassword,error:r.passwordError?e(r.passwordError):"",placeholder:e("Пароль")}),(0,a.jsx)(u.A,{className:_,type:"password",value:r.passwordRepeat,onChange:r.setPasswordRepeat,error:r.passwordRepeatError?e(r.passwordRepeatError):"",placeholder:e("Повторите пароль")}),(0,a.jsx)(l.A,{className:"u3gy_olV",theme:l.O.CLEAR,onClick:w,type:"button",children:e("Войти")}),(0,a.jsx)(l.A,{className:"oQCkD9JJ",type:"submit",children:e("Зарегистрироваться")})]})})}))}}]);