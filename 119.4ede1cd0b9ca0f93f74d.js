"use strict";(self.webpackChunkkts_frontend_project=self.webpackChunkkts_frontend_project||[]).push([[119],{8119:(e,t,r)=>{r.r(t),r.d(t,{default:()=>E});var n=r(4848),s=r(1698),a=r(2385),c=r(6540),l=r(2389);var o=r(3390),i=r(1058),d=r(6942),u=r.n(d),h=r(3443);var p=function(){return p=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},p.apply(this,arguments)};const f=(0,h.PA)((function(e){var t=e.className,r=e.values,s=e.onChange,a=e.errors,l=e.maxCount,o=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}(e,["className","values","onChange","errors","maxCount"]),d=(0,c.useCallback)((function(e,t){var n=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}([],r,!0);n[t]=e,s(n)}),[r,s]);return(0,n.jsx)("div",{className:"Yvy9Na6g",children:Array.from(Array(r.length+Number(r.length!==l)).keys()).map((function(e){return(0,n.jsxs)("div",{className:u()("KE7T0gJy",t),children:[(0,n.jsx)("div",{className:"qBDUb0NI",children:(0,n.jsx)("div",{className:"P9DQ9rcE",style:{backgroundImage:"url(".concat(r[e],")")}})}),(0,n.jsx)(i.A,p({className:"FLaTFBMT",value:r[e]||"",onChange:function(t){return d(t,e)},error:a[e]},o))]},e)}))})}));var v=r(5845),j=r(6291),x=r(7813);const m="D3URQvvS",g=(0,h.PA)((function(){var e=(0,s.fX)(),t=(0,l.Bd)("dashboard").t,r=(0,c.useCallback)((function(t){t.preventDefault(),e.checkAndSave()}),[e]),a=(0,c.useCallback)((function(e){return e.map((function(e){return{key:String(e.id),value:e.name}}))}),[]),d=(0,c.useCallback)((function(e){return e.map((function(e){return e.value})).join(",")}),[]),u=(0,c.useCallback)((function(t){e.setCategory(t)}),[e]);return(0,n.jsx)(j.A,{isShow:e.isShowModal,setIsShow:e.setIsShowModal,children:(0,n.jsxs)("form",{className:"aYvoNx5L",onSubmit:r,noValidate:!0,children:[(0,n.jsx)(i.A,{className:m,type:"text",value:e.title,onChange:e.setTitle,error:e.titleError?t(e.titleError):"",placeholder:t("Заголовок")}),(0,n.jsx)(i.A,{className:m,type:"text",value:e.description,onChange:e.setDescription,error:e.descriptionError?t(e.descriptionError):"",placeholder:t("Описание")}),(0,n.jsxs)("div",{children:[(0,n.jsx)(v.A,{className:m,options:a(e.categories),value:e.category,onChange:u,getTitle:d,multi:!1,placeholder:t("Категория")}),(0,n.jsx)(i.A,{className:m,type:"text",value:e.price,onChange:e.setPrice,error:e.priceError?t(e.priceError):"",placeholder:t("Цена")})]}),(0,n.jsx)(f,{className:m,type:"text",values:(0,x.HO)(e.images),onChange:e.setImages,errors:e.imagesError.map((function(e){return e?t(e):""})),maxCount:5,placeholder:t("Ссылка на фото")}),(0,n.jsx)(o.A,{className:"ED0GkMSt",type:"submit",loading:e.isLoading,children:t("Сохранить")})]})})}));var b=r(1897),y=r(2418);const A="uDoViB7k",N=function(e){var t=e.product,r=e.onChange,s=e.onDelete,a=(0,l.Bd)("dashboard").t;return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:t.id})}),(0,n.jsx)("td",{children:(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:t.title})}),(0,n.jsx)("td",{children:(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:t.category.name})}),(0,n.jsx)("td",{className:"dCokqIvC",children:(0,n.jsxs)(y.A,{tag:"span",view:"p-20",children:["$",t.price]})}),(0,n.jsx)("td",{children:(0,n.jsx)(o.A,{className:A,theme:o.O.CLEAR,onClick:r,children:a("Изменить")})}),(0,n.jsx)("td",{children:(0,n.jsx)(o.A,{className:A,theme:o.O.CLEAR,onClick:s,children:a("Удалить")})})]})};var C=r(255);const _="AiKIBXkn",k="RuE3UeIS",P=function(){return(0,n.jsxs)("tr",{className:"ASdGB61Q",children:[(0,n.jsx)("td",{children:(0,n.jsx)(C.A,{className:"ZecWZgRw",height:20})}),(0,n.jsx)("td",{children:(0,n.jsx)(C.A,{className:k,height:20})}),(0,n.jsx)("td",{children:(0,n.jsx)(C.A,{className:k,height:20})}),(0,n.jsx)("td",{className:_,children:(0,n.jsx)(C.A,{className:k,height:20})}),(0,n.jsx)("td",{className:_,children:(0,n.jsx)(C.A,{className:k,height:20})}),(0,n.jsx)("td",{className:_,children:(0,n.jsx)(C.A,{className:k,height:20})})]})},w={ProductsTable__top:"_vLB_TiP",ProductsTable__total:"fsRaYzBe",ProductsTable__table:"pjqkSdpo",ProductsTable__id:"vwbmpEJu",ProductsTable__title:"BIMKh_Xe",ProductsTable__category:"UPtChj9L",ProductsTable__price:"pDZ0FbIE",ProductsTable__btn:"QjRwx2MQ"},T=(0,h.PA)((function(){var e=(0,s.fX)(),t=(0,l.Bd)("dashboard").t,r=(0,c.useCallback)((function(t){t.stopPropagation(),e.openCreateModal()}),[e]),a=(0,c.useCallback)((function(t,r){t.stopPropagation(),e.setSelectedProduct(r),e.openUpdateModal()}),[e]),i=(0,c.useCallback)((function(t){e.setSelectedProduct(t),e.deleteProductAndUpdate()}),[e]);return(0,n.jsxs)("div",{className:w.ProductsTable,children:[(0,n.jsxs)("div",{className:w.ProductsTable__top,children:[(0,n.jsx)(y.A,{tag:"h2",view:"p-20",children:(0,n.jsxs)("span",{className:w.ProductsTable__total,children:[t("Всего")," ",e.isLoading?(0,n.jsx)(b.A,{size:"s"}):e.totalProducts]})}),(0,n.jsx)(o.A,{onClick:r,children:t("Создать")})]}),(0,n.jsxs)("table",{className:w.ProductsTable__table,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsxs)("th",{className:w.ProductsTable__id,children:[(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:"id"})," "]}),(0,n.jsx)("th",{className:w.ProductsTable__title,children:(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:t("Заголовок")})}),(0,n.jsx)("th",{className:w.ProductsTable__category,children:(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:t("Категория")})}),(0,n.jsx)("th",{className:w.ProductsTable__price,children:(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:t("Цена")})}),(0,n.jsx)("th",{className:w.ProductsTable__btn,children:(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:t("Изменить")})}),(0,n.jsx)("th",{className:w.ProductsTable__btn,children:(0,n.jsx)(y.A,{tag:"span",view:"p-20",children:t("Удалить")})})]})}),(0,n.jsx)("tbody",{children:e.isLoading?Array.from(Array(20).keys()).map((function(e){return(0,n.jsx)(P,{},e)})):e.products.map((function(e){return(0,n.jsx)(N,{product:e,onChange:function(t){return a(t,e)},onDelete:function(){return i(e)}},e.id)}))})]})]})})),E=function(){var e=(0,s.fX)(),t=(0,l.Bd)("dashboard").t;return(0,c.useEffect)((function(){e.getAllProducts(),e.getCategoryes()}),[e]),(0,a.C)({t,store:e}),(0,n.jsxs)("div",{className:"F7_gbgpq",children:[(0,n.jsx)(T,{}),(0,n.jsx)(g,{})]})}},5845:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(4848),s=r(5568),a=function(){return a=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},a.apply(this,arguments)};const c=function(e){return(0,n.jsx)(s.A,a({},e,{viewBox:"0 0 24 24",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.33563 8.74741L3.66436 7.25259L12 14.662L20.3356 7.25259L21.6644 8.74741L12 17.338L2.33563 8.74741Z",fill:"currentColor"})}))};var l=r(1058),o=r(2418),i=r(6942),d=r.n(i),u=r(6540);var h=function(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))};const p=function(e){var t=e.className,r=e.options,s=e.value,a=e.onChange,i=e.disabled,p=e.getTitle,f=e.multi,v=void 0===f||f,j=e.placeholder,x=(0,u.useState)(!1),m=x[0],g=x[1],b=(0,u.useState)(""),y=b[0],A=b[1],N=(0,u.useRef)(null);return(0,u.useEffect)((function(){var e=function(e){var t;(null===(t=N.current)||void 0===t?void 0:t.contains(e.target))||g(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[]),(0,n.jsxs)("div",{ref:N,className:d()("qg6tNVA3",t),children:[(0,n.jsx)(l.A,{type:"text",onFocus:function(){return g(!0)},value:m?y:s.length?p(s):"",placeholder:p(s)||j,onChange:function(e){return A(e)},afterSlot:(0,n.jsx)(c,{color:"secondary"}),disabled:i}),m&&!i&&!!r.length&&(0,n.jsx)("div",{className:"hQBLQpbB",children:r.filter((function(e){return e.value.toLowerCase().includes(y.toLowerCase())})).map((function(e){return(0,n.jsx)("button",{className:"wCkPoJA1",type:"button",onClick:function(){return function(e){if(s.find((function(t){return t.key===e.key}))){if(!v)return void a([]);a(s.filter((function(t){return t.key!==e.key})))}else{if(!v)return void a([e]);a(h(h([],s,!0),[e],!1))}}(e)},children:(0,n.jsx)(o.A,{view:"p-16",color:s.find((function(t){return t.key===e.key}))?"accent":"primary",children:e.value})},e.key)}))})]})}},6291:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(4848),s=r(6942),a=r.n(s),c=r(6540);const l=function(e){var t,r=e.children,s=e.isShow,l=e.setIsShow,o=(0,c.useRef)(null);return(0,c.useEffect)((function(){var e=function(e){var t;(null===(t=o.current)||void 0===t?void 0:t.contains(e.target))||l(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[s,l]),(0,n.jsx)("div",{className:a()("fhKpHIOl",(t={},t.r1OVFJXC=!s,t)),children:(0,n.jsx)("div",{className:"w87ECLnw",ref:o,children:r})})}}}]);