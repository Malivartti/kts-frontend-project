"use strict";(self.webpackChunkkts_frontend_project=self.webpackChunkkts_frontend_project||[]).push([[857],{1857:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(4848),o=n(641),a=n(2385),s=n(3443),c=n(6540),i=n(2389),l=n(2595),u=n(2418),d=n(6942),f=n.n(d);const p=function(e){var t=e.className,n=(0,i.Bd)("products").t;return(0,r.jsxs)("div",{className:f()("D9pA73eY",t),children:[(0,r.jsx)(u.A,{view:"title",tag:"h1",className:"KCwpwIKG",children:n("Заголовок")}),(0,r.jsx)(u.A,{view:"p-20",color:"secondary",children:n("Описание")})]})};var h=n(3794),v=n(5568),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)};const j=function(e){var t=e.width,n=void 0===t?32:t,o=e.height,a=void 0===o?32:o,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["width","height"]);return(0,r.jsx)(v.A,m({viewBox:"0 0 32 32",width:n,height:a},s,{children:(0,r.jsx)("path",{d:"M11.88 26.5599L20.5733 17.8666C21.6 16.8399 21.6 15.1599 20.5733 14.1333L11.88 5.43994",stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}))};var g=n(3390);const x=function(e){var t=e.currentPage,n=e.totalPages,o=e.setCurrentPage;return(0,c.useCallback)((function(){var e=[1];t>3&&e.push("...");for(var r=Math.max(2,t-1);r<=Math.min(n-1,t+1);r++)e.push(r);return t<n-2&&e.push("..."),n>1&&e.push(n),e}),[t,n])().map((function(e,n){return"..."===e?(0,r.jsx)(g.A,{theme:g.O.CLEAR,className:"VunyxYef",children:e},n):(0,r.jsx)(g.A,{theme:e===t?void 0:g.O.CLEAR,onClick:function(){return o(Number(e))},children:e},n)}))},y="zY7kLa64",b="O3cfwz6l",N=(0,s.PA)((function(e){var t,n,o=e.model,a=o.currentPage,s=o.totalPages,c=o.isLoading,i=o.isFirstPage,l=o.isLastPage,u=o.decrementPage,d=o.incrementPage,p=o.setCurrentPage;if(0!==s&&1!==s&&!c)return(0,r.jsxs)("div",{className:"Uf8orgnM",children:[(0,r.jsx)(h.A,{className:f()(y,(t={},t[b]=i,t)),onClick:u}),(0,r.jsx)(x,{currentPage:a,totalPages:s,setCurrentPage:p}),(0,r.jsx)(j,{className:f()(y,(n={},n[b]=l,n)),onClick:d})]})}));var A=n(5303);const k=function(e){var t=e.className,n=e.image,o=e.captionSlot,a=e.title,s=e.subtitle,c=e.contentSlot,i=e.onClick,l=e.actionSlot;return(0,r.jsxs)("div",{className:f()("ajTAuvDQ",t),onClick:i,children:[(0,r.jsx)("div",{className:"JsiXpQUB",style:{backgroundImage:"url(".concat(n,")")}}),(0,r.jsxs)("div",{className:"R2jXfrmi",children:[o&&(0,r.jsx)(u.A,{view:"p-14",color:"secondary",weight:"medium",className:"DaUSYkdp",children:o}),a&&(0,r.jsx)(u.A,{view:"p-20",color:"primary",maxLines:1,className:"F85bIoFG",children:a}),s&&(0,r.jsx)(u.A,{view:"p-16",color:"secondary",maxLines:3,className:"d5jNzFa6",children:s}),(0,r.jsxs)("div",{className:"D0ibxE4E",children:[c&&(0,r.jsx)(u.A,{view:"p-18",color:"primary",weight:"bold",children:c}),l&&(0,r.jsx)("div",{className:"bCqkM58K",children:l})]})]})]})};var w=n(255);const O=function(){return(0,r.jsxs)("div",{className:"Ka2Hurzg",children:[(0,r.jsx)(w.A,{className:"gHcB4x5I"}),(0,r.jsxs)("div",{className:"hy4vygNn",children:[(0,r.jsx)(w.A,{className:"JpglHEJF"}),(0,r.jsx)(w.A,{className:"liFQvF8m"}),(0,r.jsx)(w.A,{className:"zTQLwAZx",count:3}),(0,r.jsxs)("div",{className:"CgZqiutR",children:[(0,r.jsx)(w.A,{className:"teAxGsLa"}),(0,r.jsx)(w.A,{className:"ENPhHAFh"})]})]})]})};var P=function(){return P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},P.apply(this,arguments)};const C=function(e){var t=e.isLoading,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["isLoading"]);return t?(0,r.jsx)(O,{}):(0,r.jsx)(k,P({},n))};var L=n(1897),S=n(7813);const B=(0,s.PA)((function(e){var t=e.className,n=(0,o.zt)(),s=(0,i.Bd)("products").t,d=(0,c.useRef)(null),f=(0,c.useCallback)((function(e,t){e.preventDefault(),a.A.bag.addToBag(t)}),[]);return(0,c.useLayoutEffect)((function(){var e=(0,S.mJ)((function(){return{currentPage:n.paginationModel.currentPage,products:n.products}}),(function(e){1!==e.currentPage?d.current&&d.current.scrollIntoView():window.scrollTo(0,0)}));return function(){e()}})),(0,r.jsxs)("div",{className:t,children:[(0,r.jsxs)("div",{className:"vIcZD0ZB",ref:d,children:[(0,r.jsx)(u.A,{view:"p-32",tag:"h2",className:"PBqVGh_c",children:s("Всего продуктов")}),n.isLoading?(0,r.jsx)(L.A,{size:"m"}):(0,r.jsx)(u.A,{view:"p-20",color:"accent",children:n.totalProducts})]}),(0,r.jsxs)("div",{className:"goPL4Uru",children:[n.isLoading&&Array.from(Array(n.limit).keys()).map((function(e){return(0,r.jsx)(C,{isLoading:!0,image:"",title:"",subtitle:""},e)})),n.isNoProducts?(0,r.jsx)(u.A,{tag:"h3",view:"p-20",children:s("Нет продуктов")}):n.products.map((function(e){return(0,r.jsx)(l.N_,{to:A.Vx.product.create(e.id),children:(0,r.jsx)(C,{image:e.images[0],captionSlot:e.category.name,title:e.title,subtitle:e.description,contentSlot:"$".concat(e.price),actionSlot:(0,r.jsx)(g.A,{onClick:function(t){return f(t,e)},children:s("В корзину")})})},e.id)}))]})]})}));var E=n(1058),F=n(5845);const I=(0,s.PA)((function(e){var t,n,a=e.className,s=(0,o.zt)(),l=(0,i.Bd)("products").t,u=(t=function(){s.getProductsByFirst()},n=(0,c.useRef)(null),function(){clearTimeout(n.current),n.current=setTimeout((function(){return t()}),500)}),d=(0,c.useCallback)((function(e){return e.map((function(e){return{key:String(e.id),value:e.name}}))}),[]),p=(0,c.useCallback)((function(e){return e.map((function(e){return e.value})).join(",")}),[]),h=(0,c.useCallback)((function(e){s.setSearch(e),u()}),[s,u]),v=(0,c.useCallback)((function(e){s.setFilter(e),u()}),[s,u]);return(0,r.jsxs)("div",{className:f()("vpOFf6yC",a),children:[(0,r.jsx)(E.A,{value:s.search,onChange:h,className:"Sojk8IBq",placeholder:l("Поиск продукта")}),(0,r.jsx)(F.A,{options:d(s.categories),value:s.filter,onChange:v,getTitle:p,className:"frgS28iA",multi:!1,placeholder:l("Фильтр")})]})})),M=(0,s.PA)((function(){var e=(0,o.zt)(),t=(0,i.Bd)("products").t,n=a.A.query.search,s=(0,l.ok)(),u=(s[0],s[1]);return(0,c.useEffect)((function(){u(n)}),[u,n]),(0,c.useEffect)((function(){e.getProducts(),e.getCategoryes().then((function(){e.getDataOfQueryParams()}))}),[e]),(0,a.C)({t,store:e}),(0,r.jsxs)("div",{className:"oT5yLMNI",children:[(0,r.jsx)(p,{className:"QQCK8_uJ"}),(0,r.jsx)(I,{className:"IowL24jN"}),(0,r.jsx)(B,{className:"nZUzaHUA"}),(0,r.jsx)(N,{model:e.paginationModel})]})}))},5845:(e,t,n)=>{n.d(t,{A:()=>p});var r=n(4848),o=n(5568),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};const s=function(e){return(0,r.jsx)(o.A,a({},e,{viewBox:"0 0 24 24",children:(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.33563 8.74741L3.66436 7.25259L12 14.662L20.3356 7.25259L21.6644 8.74741L12 17.338L2.33563 8.74741Z",fill:"currentColor"})}))};var c=n(1058),i=n(2418),l=n(6942),u=n.n(l),d=n(6540);var f=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))};const p=function(e){var t=e.className,n=e.options,o=e.value,a=e.onChange,l=e.disabled,p=e.getTitle,h=e.multi,v=void 0===h||h,m=e.placeholder,j=(0,d.useState)(!1),g=j[0],x=j[1],y=(0,d.useState)(""),b=y[0],N=y[1],A=(0,d.useRef)(null);return(0,d.useEffect)((function(){var e=function(e){var t;(null===(t=A.current)||void 0===t?void 0:t.contains(e.target))||x(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[]),(0,r.jsxs)("div",{ref:A,className:u()("qg6tNVA3",t),children:[(0,r.jsx)(c.A,{type:"text",onFocus:function(){return x(!0)},value:g?b:o.length?p(o):"",placeholder:p(o)||m,onChange:function(e){return N(e)},afterSlot:(0,r.jsx)(s,{color:"secondary"}),disabled:l}),g&&!l&&!!n.length&&(0,r.jsx)("div",{className:"hQBLQpbB",children:n.filter((function(e){return e.value.toLowerCase().includes(b.toLowerCase())})).map((function(e){return(0,r.jsx)("button",{className:"wCkPoJA1",type:"button",onClick:function(){return function(e){if(o.find((function(t){return t.key===e.key}))){if(!v)return void a([]);a(o.filter((function(t){return t.key!==e.key})))}else{if(!v)return void a([e]);a(f(f([],o,!0),[e],!1))}}(e)},children:(0,r.jsx)(i.A,{view:"p-16",color:o.find((function(t){return t.key===e.key}))?"accent":"primary",children:e.value})},e.key)}))})]})}},3794:(e,t,n)=>{n.d(t,{A:()=>s});var r=n(4848),o=n(5568),a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)};const s=function(e){var t=e.width,n=void 0===t?32:t,s=e.height,c=void 0===s?32:s,i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["width","height"]);return(0,r.jsx)(o.A,a({viewBox:"0 0 32 32",width:n,height:c},i,{children:(0,r.jsx)("path",{d:"M20.1201 26.56L11.4268 17.8667C10.4001 16.84 10.4001 15.16 11.4268 14.1333L20.1201 5.44",stroke:"currentColor",strokeWidth:"1.5",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"})}))}}}]);