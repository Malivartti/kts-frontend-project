"use strict";(self.webpackChunkkts_frontend_project=self.webpackChunkkts_frontend_project||[]).push([[399],{6399:(e,r,t)=>{t.r(r),t.d(r,{default:()=>v});var n=t(4848),a=t(7813),o=t(2385);const i=function(){function e(){this._name="",this._nameError="",(0,a.Gn)(this,{_name:a.sH,_nameError:a.sH,name:a.EW,nameError:a.EW,setName:a.XI.bound,validateName:a.XI,updateUser:a.XI})}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nameError",{get:function(){return this._nameError},enumerable:!1,configurable:!0}),e.prototype.setName=function(e){this._name=e},e.prototype.validateName=function(){if(this._name.trim())return!0;this._nameError="Введите новое имя"},e.prototype.updateUser=function(){return e=this,r=void 0,n=function(){return function(e,r){var t,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=s(0),i.throw=s(1),i.return=s(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(t=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=r.call(e,o)}catch(e){s=[6,e],n=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(e){switch(e.label){case 0:return this.validateName()?[4,o.A.user.updateUser(this._name)]:[2];case 1:return e.sent(),[2]}}))},new((t=void 0)||(t=Promise))((function(a,o){function i(e){try{l(n.next(e))}catch(e){o(e)}}function s(e){try{l(n.throw(e))}catch(e){o(e)}}function l(e){var r;e.done?a(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,s)}l((n=n.apply(e,r||[])).next())}));var e,r,t,n},e}();var s=t(3390),l=t(2418),c=t(3443),u=t(6540),f=t(2389),d=t(1058),h=t(6291);const p=(0,c.PA)((function(e){var r=e.profileStore,t=e.isShow,a=e.setIsShow,o=(0,f.Bd)("profile").t,i=(0,u.useCallback)((function(e){e.preventDefault(),r.updateUser()}),[r]);return(0,n.jsx)(h.A,{isShow:t,setIsShow:a,children:(0,n.jsxs)("form",{className:"Olzd8nhG",onSubmit:i,noValidate:!0,children:[(0,n.jsx)(d.A,{className:"gfpyYoMq",type:"text",value:r.name,onChange:r.setName,error:r.nameError?o(r.nameError):"",placeholder:o("Новое имя")}),(0,n.jsx)(s.A,{className:"spE9yLdZ",type:"submit",children:o("Сохранить")})]})})})),m={ProfilePage:"WDcPPDH8",ProfilePage__container:"XyXe0EyB",ProfilePage__title:"hC67JhWx",ProfilePage__avatar:"pDTgm5pZ",ProfilePage__row:"yeHdWhdv",ProfilePage__btn:"C2OM82aU"},v=(0,c.PA)((function(){var e=(0,c.iz)((function(){return new i})),r=(0,u.useState)(!1),t=r[0],a=r[1],d=(0,f.Bd)("profile").t,h=(0,u.useCallback)((function(e){e.stopPropagation(),a(!0)}),[]);return(0,o.C)({t:d,store:o.A.user}),(0,n.jsxs)("div",{className:m.ProfilePage,children:[(0,n.jsx)(p,{profileStore:e,isShow:t,setIsShow:a}),(0,n.jsxs)("div",{className:m.ProfilePage__container,children:[(0,n.jsx)(l.A,{className:m.ProfilePage__title,tag:"h1",view:"title",children:d("Профиль")}),(0,n.jsx)("div",{className:m.ProfilePage__avatar,style:{backgroundImage:"url(".concat(o.A.user.user.avatar,")")}}),(0,n.jsxs)("div",{className:m.ProfilePage__row,children:[(0,n.jsx)(l.A,{className:m.ProfilePage__,tag:"div",view:"p-20",children:d("Имя")}),(0,n.jsx)(l.A,{className:m.ProfilePage__,tag:"div",view:"p-20",children:o.A.user.user.name})]}),(0,n.jsxs)("div",{className:m.ProfilePage__row,children:[(0,n.jsx)(l.A,{className:m.ProfilePage__,tag:"div",view:"p-20",children:d("Почта")}),(0,n.jsx)(l.A,{className:m.ProfilePage__,tag:"div",view:"p-20",children:o.A.user.user.email})]}),(0,n.jsx)(s.A,{className:m.ProfilePage__btn,type:"button",onClick:h,children:d("Изменить")})]})]})}))},6291:(e,r,t)=>{t.d(r,{A:()=>s});var n=t(4848),a=t(6942),o=t.n(a),i=t(6540);const s=function(e){var r,t=e.children,a=e.isShow,s=e.setIsShow,l=(0,i.useRef)(null);return(0,i.useEffect)((function(){var e=function(e){var r;(null===(r=l.current)||void 0===r?void 0:r.contains(e.target))||s(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[a,s]),(0,n.jsx)("div",{className:o()("fhKpHIOl",(r={},r.r1OVFJXC=!a,r)),children:(0,n.jsx)("div",{className:"w87ECLnw",ref:l,children:t})})}}}]);